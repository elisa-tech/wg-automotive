digraph G {

node [shape=box width=1 height=0.5 fontname=arial fontsize=16 style=filled fillcolor=white]
graph [splines=ortho ranksep=1 nodesep=0.2 fontname=arial fontsize=16 compound=true]

vehicle [label="Vehicle" width=8, fillcolor=gray]
cluster [label="Cluster App" width=4]
requester [label="Telltale requester" width=3, fillcolor=gray]
handler [label="Request Handler" width=3]
render [label="Rendering (Qt)" width=5]
dControl [label="Display Controller" width=4]
framebuffer [label="Framebuffer" width=3]
display [label="Display" width=6]
check [label="Telltale checking" width=3]
watchdog [label="Watchdog" width=2]

vehicle -> cluster [taillabel="\r\r\r Provide vehicle state  \r(CAN bus?)  \r" style=dashed color=red]
vehicle -> requester [taillabel="\rProvide Hazard State  \r(CAN bus?)  \r" style=dashed color=red]
requester -> handler [taillabel="\rSet telltale status  \r(CAN bus?)  \r"]
cluster -> render [taillabel="\rShow state  \r(IPC?)  \r" weight=2]
cluster ->  dControl [taillabel="\r display  \rcontroller  \r configuration  \r" weight=2]
handler -> check [taillabel="\r  Set required  \r telltales  \r"]
handler -> render [taillabel="\rShow telltales  \r(IPC?)  \r"]
dControl -> display [taillabel="\rProvide  \rimage buffer(s)  \r"]
render -> framebuffer [taillabel="\rProvide  \rimage buffer(s)  \r"]
check -> display [dir=back taillabel="\r Displayed \nImage  \r" style=dashed color=red]
check -> watchdog [taillabel="\r\rPet  \r"]
watchdog -> display [taillabel="\rTurn\noff\nbacklight  \r"]
framebuffer -> dControl [dir=back taillabel="\r Initate \rDMA \r Transfer \r" style=dashed color=red]
framebuffer -> dControl [taillabel="\r Frame  \r  Data  \r"]
render -> dControl [taillabel="\r\r  set  \r base  \raddress  \r"]
}

